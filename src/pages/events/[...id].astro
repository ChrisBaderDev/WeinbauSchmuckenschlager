---
import { getCollection, render } from "astro:content";
import { Image } from "astro:assets";
import BaseLayout from "../../layouts/BaseLayout.astro";

export async function getStaticPaths() {
  const events = await getCollection("events");
  return events.map((event) => ({
    params: { id: event.id.replace(/\/index\.md$/, "") },
    props: { event },
  }));
}

const { event } = Astro.props;
const { Content } = await render(event);
---

<BaseLayout
  title={`Weinbau Schmuckenschlager - ${event.data.title}`}
  description={`Veranstaltungen: ${event.data.title} - Weinbau Schmuckenschlager`}
>
  <article class="max-w-5xl mx-auto py-16 px-4">
    <h1 class="text-4xl mb-4">{event.data.title}</h1>
    <time class="text-gray-500"
      >{event.data.date.toLocaleDateString("de-AT")}</time
    >

    {
      event.data.gallery && (
        <div class="flex gap-4 my-8 overflow-x-auto">
          {event.data.gallery.map((img: any) => (
            <Image src={img} alt="" class="h-64 w-auto object-cover" />
          ))}
        </div>
      )
    }

    <div class="prose mt-8">
      <Content />
    </div>
  </article>
</BaseLayout>

<style>
  .prose :global(h2) {
    font-size: var(--text-2xl);
    margin-top: 2rem;
    margin-bottom: 1rem;
  }

  .prose :global(h3) {
    font-size: var(--text-xl);
    margin-top: 1.5rem;
    margin-bottom: 0.75rem;
  }

  .prose :global(p) {
    margin-bottom: 1rem;
    line-height: 1.6;
  }

  .prose :global(ul), .prose :global(ol) {
    padding-left: 1.5rem;
    margin-bottom: 1rem;
  }

  .prose :global(li) {
    margin-bottom: 0.25rem;
    font-family: var(--font-sans-serif);
  }

  .prose :global(a) {
    text-decoration: underline;
  }

  .prose :global(strong) {
    font-weight: 700;
  }

  .prose :global(img) {
    padding-top: 4rem;
    padding-bottom: 4rem;
  }
</style>